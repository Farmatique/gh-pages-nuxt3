import{_ as y}from"./By0itmlT.js";import{x as k,o as u,c as i,a as f,t as g,b as N,w as V,u as p,d as b,p as B,q as P,r as q,s as x,F as S,m as C,n as D}from"./CXx-9N9l.js";const F={__name:"PartnerPreview",props:{partner:{type:Object,required:!0}},setup(n){const e=k(()=>n.partner.full_slug.replace("mirantis-com/resources/","/partners/"));return(s,r)=>{const o=y;return u(),i("div",null,[f("h2",null,"Name: "+g(n.partner.name),1),f("p",null,"Date: "+g(n.partner.published_at),1),N(o,{to:p(e)},{default:V(()=>r[0]||(r[0]=[b("VISIT")])),_:1},8,["to"])])}}},T={__name:"index",async setup(n){let e,s;const r=B();let o="published";P().path;let _=q({content:{}});const d=([e,s]=x(()=>r.get("cdn/spaces/189401/").then(t=>t.data.space.version)),e=await e,s(),e);return _.value=([e,s]=x(()=>r.get("cdn/stories",{version:o,cv:d,starts_with:"mirantis-com/resources/",excluding_ids:240137903}).then(t=>{let m=t.headers.total,c=100,l=[],v=Math.ceil(m/c);for(let a=1;a<=v;a++)l.push(r.get("cdn/stories",{per_page:c,page:a,version:o,cv:d,starts_with:"mirantis-com/resources/"}));return Promise.all(l).then(a=>{let h=[];for(let w of a)h.push(...w.data.stories);return h})}).catch(t=>{t.response?console.error(t.response.data):console.error(t)})),e=await e,s(),e),(t,m)=>(u(),i("div",null,[(u(!0),i(S,null,C(p(_),(c,l)=>(u(),D(p(F),{key:l,partner:c},null,8,["partner"]))),128))]))}};export{T as default};
